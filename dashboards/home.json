{"dashboard":{"annotations":{"list":[{"$$hashKey":"object:7","builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":null,"links":[],"liveNow":true,"panels":[{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":1683352666,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"","mode":"markdown"},"pluginVersion":"10.1.5","transparent":true,"type":"text"},{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"gridPos":{"h":3,"w":8,"x":0,"y":1},"id":1648760568,"options":{"bgColor":"transparent","clockType":"24 hour","countdownSettings":{"endCountdownTime":"2023-02-02T05:37:05+01:00","endText":"00:00:00"},"countupSettings":{"beginCountupTime":"2023-02-02T05:37:05+01:00","beginText":"00:00:00"},"dateSettings":{"dateFormat":"DD.MM.YYYY","fontSize":"20px","fontWeight":"normal","locale":"ch","showDate":false},"mode":"time","refresh":"sec","timeSettings":{"fontSize":"64px","fontWeight":"bold"},"timezone":"","timezoneSettings":{"fontSize":"12px","fontWeight":"normal","showTimezone":false,"zoneFormat":"nameOffset"}},"pluginVersion":"2.1.2","transparent":true,"type":"grafana-clock-panel"},{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"gridPos":{"h":3,"w":8,"x":8,"y":1},"id":2,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003chead\u003e\u003clink rel='stylesheet' type='text/css' href='../public/style.css'\u003e\u003c/head\u003e\r\n\r\n\u003ccenter\u003e\r\n\t\u003c!--- \u003cdiv\u003e\u003cfont size=\"1\"\u003e\u0026nbsp\u003c/font\u003e ---\u003e\r\n\t\u003cdiv\u003e\u003cfont color='hotpink' style=\"font-size: 32px;\" \u003e\u003cspan id=\"name_output\"\u003e\u003c/span\u003e - \u003cspan id=\"request_output\"\u003e\u003c/span\u003e\u003c/font\u003e\u003c/div\u003e\r\n\t\u003c!--- \u003cdiv\u003e\u003cspan id=\"status_output\"\u003e#\u003c/span\u003e\u003c/div\u003e ---\u003e\r\n\t\u003c!--- DEBUG \u003cdiv\u003eTopic: \u003cspan id=\"topic_output\"\u003e#\u003c/span\u003e\u003c/div\u003e ---\u003e\r\n\u003c/center\u003e\r\n\r\n\u003cscript\u003e\r\n\t\r\n\tvar mqtt;\r\n\tvar reconnectTimeout = 5000;\r\n\tvar port = 1884;\r\n\tvar useTLS = false;\r\n\tvar user = \"\";\r\n\tvar pwd = \"\";\r\n\tvar cleansession = true;\r\n\tvar path = \"\";\r\n\tvar buttons = $('[type=button]');\r\n\tvar host = location.hostname;\r\n\t\r\n\tconsole.log(host);\r\n\t\r\n\tbuttons.prop('disabled', true);\r\n   \r\n\tfunction MQTTconnect() {\r\n\t\tif (typeof path == \"undefined\") {\r\n\t\t\tpath = '/mqtt';\r\n\t\t}\r\n\t\tmqtt = new Paho.MQTT.Client(\r\n\t\t\thost,\r\n\t\t\tport,\r\n\t\t\tpath,\r\n\t\t\t\"web_grafanaPanel\" + parseInt(Math.random() * 10000, 10)\r\n\t\t);\r\n\t\tvar options = {\r\n\t\t\ttimeout: 3,\r\n\t\t\tuseSSL: useTLS,\r\n\t\t\tcleanSession: cleansession,\r\n\t\t\tonSuccess: onConnect,\r\n\t\t\tonFailure: function (message) {\r\n\t\t\t\t$('#status_output').html(\"Connection failed: \" + message.errorMessage + \"Retrying\");\r\n\t\t\t\tsetTimeout(MQTTconnect, reconnectTimeout);\r\n\t\t\t}\r\n\t\t};\r\n\t\tmqtt.onConnectionLost = onConnectionLost;\r\n\t\tmqtt.onMessageArrived = onMessageArrived;\r\n\t\tif (user != null) {\r\n\t\t\toptions.userName = user;\r\n\t\t\toptions.password = pwd;\r\n\t\t}\r\n\t\tconsole.log(\"Host=\" + host + \", port=\" + port + \", path=\" + path + \" TLS = \" + useTLS + \" username=\" + user + \" password=\" + pwd);\r\n\t\tmqtt.connect(options);\r\n\t}\r\n\t\r\n\tfunction onConnect() {\r\n\t\t$('#status_output').html('Connected to: ' + host + ':' + port + path);\r\n\t\t// Connection succeeded; subscribe to our topic(s)\r\n\t\tbuttons.prop('disabled', false);\r\n\t}\r\n\r\n\tfunction onConnectionLost(response) {\r\n\t\tsetTimeout(MQTTconnect, reconnectTimeout);\r\n\t\t$('#status_output').html(\"connection lost: \" + response.errorMessage + \". Reconnecting\");\r\n\t\tbuttons.prop('disabled', true);\r\n\t};\r\n\r\n\tfunction onMessageArrived(message) {\r\n\t\tvar payload = message.payloadString;\r\n\t\t$('#request_output').html(payload);\r\n\t};\r\n\t\r\n\tvar publish = function (payload, input_topic, output_topic, device_name, qos) {\r\n\t\tconsole.log('Sending: ' + JSON.stringify(payload));\r\n\t\t\r\n\t\tmqtt.subscribe(output_topic, {\r\n\t\t  qos: 2\r\n\t\t});\r\n\t\t\r\n\t\t$('#status_output').html('Connected to ' + host + ':' + port + path);\r\n\t\t$('#topic_output').html(input_topic);\r\n\t\t$('#name_output').html(device_name);\r\n\t\t\r\n\t\tvar message = new Paho.MQTT.Message(payload);\r\n\t\tmessage.destinationName = input_topic;\r\n\t\tmessage.qos = qos;\r\n\t\tmqtt.send(message);\r\n\t\t\r\n\t\t\tsetTimeout(() =\u003e { mqtt.unsubscribe(output_topic); }, 5000);\r\n\t\t\r\n\t}\r\n\r\n\tif (typeof Paho === 'undefined') {\r\n\t\tvar script = document.createElement('script');\r\n\t\tdocument.body.appendChild(script);\r\n\t\tscript.onload = function () {\r\n\t\t\tMQTTconnect();\r\n\t\t}\r\n\t\tscript.src = '../public/mqttws31.min.js';\r\n\t} else {\r\n\t   MQTTconnect();\r\n\t}\r\n\u003c/script\u003e","mode":"html"},"pluginVersion":"10.1.5","targets":[{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"displayName":"","mappings":[],"max":40,"min":10,"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null},{"color":"green","value":20},{"color":"#EAB839","value":25},{"color":"orange","value":30},{"color":"red","value":35}]},"unit":"celsius"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":16,"y":1},"id":1648760563,"links":[],"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":48},"textMode":"value"},"pluginVersion":"10.1.5","targets":[{"alias":"Temperatur","datasource":{"type":"influxdb","uid":"8iwjhe17z"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["linear"],"type":"fill"}],"measurement":"temperature","orderByTime":"ASC","policy":"default","query":"SELECT last(\"value\") FROM \"temperature\" WHERE (\"location\" = 'shellyht-B895A5') AND $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"location","operator":"=","value":"shellyht-B895A5"}]}],"transparent":true,"type":"stat"},{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"displayName":"","mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"orange","value":20},{"color":"#6ED0E0","value":40},{"color":"orange","value":60},{"color":"red","value":80}]},"unit":"humidity"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":20,"y":1},"id":19,"links":[],"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"valueSize":48},"textMode":"value"},"pluginVersion":"10.1.5","targets":[{"alias":"Feuchte","datasource":{"type":"influxdb","uid":"8iwjhe17z"},"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["linear"],"type":"fill"}],"measurement":"humidity","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"location","operator":"=","value":"shellyht-B895A5"}]}],"transparent":true,"type":"stat"},{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"gridPos":{"h":4,"w":24,"x":0,"y":4},"id":8,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003ca class=\"weatherwidget-io\" href=\"https://forecast7.com/de/47d098d27/emmenbrucke/\" data-label_1=\"EMMENBRÜCKE\" data-label_2=\"Wetter\" data-font=\"Open Sans\" data-icons=\"Climacons Animated\" data-theme=\"gray\" data-basecolor=\"#111217\" data-accent=\"rgba(67, 67, 67, 0.64)\" data-highcolor=\"#de792d\" data-suncolor=\"#de792d\" data-cloudfill=\"#5a5a5a\" \u003eEMMENBRÜCKE Wetter\u003c/a\u003e\r\n\u003cscript\u003e\r\n!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');\r\n\u003c/script\u003e","mode":"html"},"pluginVersion":"10.1.5","targets":[{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"refId":"A"}],"transparent":true,"type":"text"},{"gridPos":{"h":5,"w":8,"x":0,"y":8},"id":1697274319,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shellies/shelly1pm-E89F6D857029/relay/0/command','shellies/shelly1pm-E89F6D857029/relay/0','TV',2);\"\u003e\r\n\t\u003ctable style=\"width: 100%; height: 80%;\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd style=\"width:70px;\"\u003e\u003cimg src=\"../public/img/tv.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd style=\"text-align:left;\"\u003e\u003cfont size=\"5\"\u003eTV\u003c/font\u003e\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"10.1.5","transparent":true,"type":"text"},{"gridPos":{"h":5,"w":8,"x":8,"y":8},"id":1696270924,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shelly1pmmini-348518e05470/command/switch:0','shelly1pmmini-348518e05470/status/switch:0/out','Büro',2);\"\u003e\r\n\t\u003ctable style=\"width: 100%; height: 80%;\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd style=\"width:70px;\"\u003e\u003cimg src=\"../public/img/computer.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd style=\"text-align:left;\"\u003e\u003cfont size=\"5\"\u003eBüro\u003c/font\u003e\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"10.1.5","transparent":true,"type":"text"},{"gridPos":{"h":5,"w":8,"x":16,"y":8},"id":1697274320,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003cbutton class=\"home\" onclick=\"publish('toggle','shellyplus1pm-441793a626c8/command/switch:0','shellyplus1pm-441793a626c8/status/switch:0/out','Light',2);\"\u003e\r\n\t\u003ctable style=\"width: 100%; height: 80%;\"\u003e\r\n\t\t\u003ctr\u003e\r\n\t\t\t\u003ctd style=\"width:70px;\"\u003e\u003cimg src=\"../public/img/onoff.png\" /\u003e\u003c/td\u003e\r\n\t\t\t\u003ctd style=\"text-align:left;\"\u003e\u003cfont size=\"5\"\u003eLight\u003c/font\u003e\u003c/td\u003e\r\n\t\t\u003c/tr\u003e\r\n\t\u003c/table\u003e\r\n\u003c/button\u003e","mode":"html"},"pluginVersion":"10.1.5","transparent":true,"type":"text"},{"datasource":{"type":"influxdb","uid":"8iwjhe17z"},"gridPos":{"h":1,"w":24,"x":0,"y":13},"id":1683352665,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"","mode":"markdown"},"pluginVersion":"10.1.5","transparent":true,"type":"text"},{"gridPos":{"h":4,"w":12,"x":0,"y":14},"id":1696271883,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003ccenter\u003e\u003cfont class=\"header\"\u003eCover\u003c/font\u003e\u003c/center\u003e\n\u003cp\u003e\n\n\u003cdiv class=\"slider\"\u003e\n\n\t\u003cfont class=\"home\"\u003e▼ \u0026nbsp;\u003c/font\u003e\n\t\u003cinput id=\"1696271883\" type=\"range\" min=\"0\" max=\"100\" style=\"white-space: nowrap\" onchange=\"update_value_1696271883()\" /\u003e\n\t\u003cfont class=\"home\"\u003e\u0026nbsp; ▲\u003c/font\u003e\n\n\u003c/div\u003e\n\n\u003cscript\u003e\n\nvar update_value_1696271883 = function() { \n\n\tvar val_1696271883 = document.getElementById(\"1696271883\").value; \n\tvar pos_1696271883 = \"pos,\" + val_1696271883\n\tpublish(pos_1696271883, 'shellyplus2pm-08b61fcdf67c/command/cover:0', 'shellyplus2pm-08b61fcdf67c/status/cover:0/out', 'Cover Links', 2); \n\n}\n\n\u003c/script\u003e","mode":"html"},"pluginVersion":"10.1.5","transparent":true,"type":"text"},{"gridPos":{"h":4,"w":12,"x":12,"y":14},"id":1696356979,"links":[],"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"\u003ccenter\u003e\u003cfont class=\"header\"\u003eCover 2\u003c/font\u003e\u003c/center\u003e\n\u003cp\u003e\n\n\u003cdiv class=\"slider\"\u003e\n\n\t\u003cfont class=\"home\"\u003e▼ \u0026nbsp;\u003c/font\u003e\n\t\u003cinput id=\"1696356979\" type=\"range\" min=\"0\" max=\"100\" style=\"white-space: nowrap\" onchange=\"update_value_1696356979()\" /\u003e\n\t\u003cfont class=\"home\"\u003e\u0026nbsp; ▲\u003c/font\u003e\n\n\u003c/div\u003e\n\n\u003cscript\u003e\n\nvar update_value_1696356979 = function() { \n\n\tvar val_1696356979 = document.getElementById(\"1696356979\").value; \n\tvar pos_1696356979 = \"pos,\" + val_1696356979\n\tpublish(pos_1696356979, 'shellyplus2pm-08b61fcc5314/command/cover:0', 'shellyplus2pm-08b61fcc5314/status/cover:0/out', 'Cover 2', 2); \n\n}\n\n\u003c/script\u003e","mode":"html"},"pluginVersion":"10.1.5","transparent":true,"type":"text"}],"refresh":"15m","revision":1,"schemaVersion":38,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-2d","to":"now"},"timepicker":{"hidden":false,"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Home","uid":"XieEaLmRk","version":1,"weekStart":""}}